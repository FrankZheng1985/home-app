<!--pages/profile/profile.wxml-->
<view class="container profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card card">
    <view class="user-info" bindtap="goToEdit">
      <image 
        class="user-avatar avatar-large" 
        src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}"
        mode="aspectFill"
      ></image>
      <view class="user-detail">
        <text class="user-name">{{userInfo.nickname || 'æœªè®¾ç½®æ˜µç§°'}}</text>
        <text class="user-family text-muted" wx:if="{{familyInfo}}">ğŸ  {{familyInfo.name}}</text>
        <text class="user-family text-muted" wx:else>æš‚æœªåŠ å…¥å®¶åº­</text>
      </view>
      <text class="edit-arrow">></text>
    </view>
  </view>

  <!-- ç§¯åˆ†æ¦‚è§ˆ -->
  <view class="points-card card" wx:if="{{familyInfo}}">
    <view class="points-header">
      <text class="points-title">æˆ‘çš„ç§¯åˆ†</text>
    </view>
    <view class="points-content">
      <view class="points-item">
        <text class="points-value text-primary">{{pointsSummary.totalPoints || 0}}</text>
        <text class="points-label">ç´¯è®¡ç§¯åˆ†</text>
      </view>
      <view class="points-divider"></view>
      <view class="points-item">
        <text class="points-value text-success">{{pointsSummary.thisMonth || 0}}</text>
        <text class="points-label">æœ¬æœˆè·å¾—</text>
      </view>
    </view>
    <view class="points-footer" bindtap="onMenuTap" data-url="/pages/profile/points">
      <text class="text-primary">æŸ¥çœ‹æ˜ç»† ></text>
    </view>
  </view>

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-card card">
    <view 
      class="menu-item" 
      wx:for="{{menuItems}}" 
      wx:key="id"
      data-url="{{item.url}}"
      bindtap="onMenuTap"
    >
      <view class="menu-left">
        <text class="menu-icon">{{item.icon}}</text>
        <text class="menu-title">{{item.title}}</text>
      </view>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info text-muted">
    ç‰ˆæœ¬ 1.0.0
  </view>
</view>
