<!--pages/profile/points.wxml - ç²¾ç¾è®¾è®¡ç‰ˆ-->
<view class="points-page">
  <!-- ç§¯åˆ†æ¦‚è§ˆå¡ç‰‡ -->
  <view class="summary-card">
    <view class="summary-bg"></view>
    <view class="summary-content">
      <view class="summary-main">
        <text class="total-label">æˆ‘çš„ç§¯åˆ†</text>
        <text class="total-points">{{summary.totalPoints || 0}}</text>
      </view>
      <view class="summary-stats">
        <view class="stat-item">
          <text class="stat-value">+{{summary.thisWeek || 0}}</text>
          <text class="stat-label">æœ¬å‘¨è·å¾—</text>
        </view>
        <view class="stat-divider"></view>
        <view class="stat-item">
          <text class="stat-value">+{{summary.thisMonth || 0}}</text>
          <text class="stat-label">æœ¬æœˆè·å¾—</text>
        </view>
        <view class="stat-divider"></view>
        <view class="stat-item">
          <text class="stat-value">ç¬¬{{summary.rank || '-'}}å</text>
          <text class="stat-label">å®¶åº­æ’å</text>
        </view>
      </view>
    </view>
    <view class="coin-icon">ğŸ’°</view>
  </view>

  <!-- ç§¯åˆ†æ˜ç»† -->
  <view class="section-header">
    <text class="section-title">ğŸ“‹ ç§¯åˆ†æ˜ç»†</text>
  </view>

  <view class="transactions-list" wx:if="{{transactions.length > 0}}">
    <view class="transaction-card" wx:for="{{transactions}}" wx:key="id">
      <view class="transaction-icon {{item.type === 'earn' ? 'earn' : 'spend'}}">
        <text>{{item.type === 'earn' ? 'ğŸ“ˆ' : 'ğŸ“‰'}}</text>
      </view>
      <view class="transaction-info">
        <text class="transaction-title">{{item.description}}</text>
        <text class="transaction-time">{{item.createdAtText}}</text>
      </view>
      <text class="transaction-points {{item.type === 'earn' ? 'positive' : 'negative'}}">
        {{item.type === 'earn' ? '+' : '-'}}{{item.points}}
      </text>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <view class="empty-icon animate-float">ğŸ“Š</view>
    <view class="empty-title">æš‚æ— ç§¯åˆ†è®°å½•</view>
    <view class="empty-desc">å®Œæˆå®¶åŠ¡å³å¯è·å¾—ç§¯åˆ†å“¦</view>
  </view>

  <view class="load-more" wx:if="{{hasMore && transactions.length > 0}}">
    <text>ä¸Šæ‹‰åŠ è½½æ›´å¤š</text>
  </view>
  <view class="no-more" wx:if="{{!hasMore && transactions.length > 0}}">
    <text>æ²¡æœ‰æ›´å¤šäº†</text>
  </view>
</view>
