<!--pages/profile/edit.wxml - 3Dæç®€ç§‘æŠ€ç‰ˆ-->
<view class="page-container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="hero-section">
    <view class="hero-bg-glow"></view>
    <view class="hero-content page-fade-in">
      <button class="avatar-upload" open-type="chooseAvatar" bindchooseavatar="chooseAvatar">
        <view class="avatar-wrapper">
          <image 
            class="avatar-img" 
            src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}" 
            mode="aspectFill"
          ></image>
          <view class="camera-badge">ğŸ“·</view>
        </view>
      </button>
      <view class="hero-title">ä¸ªäººèµ„æ–™</view>
      <view class="hero-subtitle">Edit Your Profile</view>
    </view>
  </view>

  <!-- è¡¨å•å¡ç‰‡ -->
  <view class="glass-card form-card success-pop">
    <view class="form-group">
      <text class="form-label">æ˜µç§°</text>
      <view class="input-wrapper">
        <input 
          type="nickname"
          class="form-input" 
          placeholder="è¯·è¾“å…¥æ‚¨çš„æ˜µç§°"
          value="{{userInfo.nickname}}"
          bindinput="onNicknameInput"
          maxlength="20"
        />
      </view>
    </view>

    <view class="form-group">
      <text class="form-label">æ€§åˆ«</text>
      <view class="gender-options">
        <view class="gender-item {{userInfo.gender === 1 ? 'active' : ''}}" bindtap="selectGender" data-gender="1">ğŸ‘¦ ç”·</view>
        <view class="gender-item {{userInfo.gender === 2 ? 'active' : ''}}" bindtap="selectGender" data-gender="2">ğŸ‘§ å¥³</view>
        <view class="gender-item {{userInfo.gender === 0 ? 'active' : ''}}" bindtap="selectGender" data-gender="0">ğŸ¤« ä¿å¯†</view>
      </view>
    </view>

    <view class="form-group">
      <text class="form-label">ç”Ÿæ—¥</text>
      <picker mode="date" bindchange="onDateChange" value="{{userInfo.birthday}}" start="1950-01-01" end="2020-12-31">
        <view class="input-wrapper date-picker">
          <text class="date-value {{userInfo.birthday ? '' : 'placeholder'}}">
            {{userInfo.birthday || 'é€‰æ‹©æ‚¨çš„ç”Ÿæ—¥'}}
          </text>
          <text class="date-arrow">â€º</text>
        </view>
      </picker>
    </view>
  </view>

  <!-- ä¿å­˜æŒ‰é’® -->
  <view class="action-section">
    <view class="primary-btn btn-active-feedback {{userInfo.nickname ? '' : 'disabled'}}" bindtap="{{userInfo.nickname ? 'saveProfile' : ''}}">
      <text>{{isSubmitting ? 'æ­£åœ¨ä¿å­˜...' : 'ä¿å­˜ä¿®æ”¹'}}</text>
    </view>
  </view>

  <view class="safe-bottom"></view>
</view>
