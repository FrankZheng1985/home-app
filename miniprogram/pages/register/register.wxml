<!--pages/register/register.wxml - 3Dæç®€ç§‘æŠ€ç‰ˆ-->
<view class="page-container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="hero-section">
    <view class="hero-bg-glow"></view>
    <view class="hero-content page-fade-in">
      <button class="avatar-upload" open-type="chooseAvatar" bindchooseavatar="chooseAvatar">
        <view class="avatar-wrapper">
          <image 
            class="avatar-img" 
            src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}" 
            mode="aspectFill"
          ></image>
          <view class="camera-badge">ğŸ“·</view>
        </view>
      </button>
      <view class="hero-title">å®Œå–„èµ„æ–™</view>
      <view class="hero-subtitle">Complete Your Profile</view>
    </view>
  </view>

  <!-- è¡¨å•å¡ç‰‡ -->
  <view class="glass-card form-card success-pop">
    <view class="form-group">
      <text class="form-label">æ‚¨çš„æ˜µç§°</text>
      <view class="input-wrapper">
        <input 
          type="nickname"
          class="form-input" 
          placeholder="ç»™è‡ªå·±èµ·ä¸ªåå­—å§"
          value="{{userInfo.nickname}}"
          bindinput="onNicknameInput"
          maxlength="12"
        />
      </view>
    </view>

    <view class="form-group">
      <text class="form-label">æ‚¨çš„æ€§åˆ«</text>
      <view class="gender-options">
        <view class="gender-item {{userInfo.gender === 1 ? 'active' : ''}}" bindtap="selectGender" data-gender="1">ğŸ‘¦ ç”·ç”Ÿ</view>
        <view class="gender-item {{userInfo.gender === 2 ? 'active' : ''}}" bindtap="selectGender" data-gender="2">ğŸ‘§ å¥³ç”Ÿ</view>
        <view class="gender-item {{userInfo.gender === 0 ? 'active' : ''}}" bindtap="selectGender" data-gender="0">ğŸ¤« ä¿å¯†</view>
      </view>
    </view>
  </view>

  <!-- å–œå¥½é€‰æ‹© -->
  <view class="section-title">æˆ‘çš„å–œå¥½</view>
  <view class="tags-grid">
    <view 
      class="tag-item glass-card {{item.selected ? 'selected' : ''}}" 
      wx:for="{{preferenceOptions}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="togglePreference"
    >
      <text>{{item.emoji}} {{item.name}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="action-section">
    <view class="primary-btn btn-active-feedback {{userInfo.nickname ? '' : 'disabled'}}" bindtap="{{userInfo.nickname ? 'saveAndContinue' : ''}}">
      <text>{{isSubmitting ? 'æ­£åœ¨ä¿å­˜...' : 'ä¿å­˜å¹¶ç»§ç»­'}}</text>
    </view>
    <view class="skip-link" bindtap="skipRegister">ç¨åå®Œå–„ â€º</view>
  </view>

  <view class="safe-bottom"></view>
</view>
